---
title: TV ì• í”Œë¦¬ì¼€ì´ì…˜(OTT) ë™ì‘ êµ¬í˜„í•˜ê¸°(feat. Spatial-Navigation)
date: 2022-06-16
description: React + TS í™˜ê²½ì—ì„œ Spatial-Navigation ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ë³´ì.
tags:
  [
    'spatianl navigation',
    'spatial-navigation',
    'react-spatial-navigation',
    'react',
    'typescript',
    'javascript',
    'ott',
  ]
---

## ì‚¬ìš©í•˜ê²Œ ëœ ë°°ê²½

ì´ë²ˆì— íˆ¬ì…ëœ í”„ë¡œì íŠ¸ëŠ” OTT í˜•íƒœì˜ TV ì›¹ì•± ì„œë¹„ìŠ¤ë¡œ ë„·í”Œë¦­ìŠ¤, ë„¤ì´ë²„ ì‹œë¦¬ì¦ˆ, ìœ íŠœë¸Œ, â€¦ TV ì•±ê³¼ ê°™ì€ ë™ì‘ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ Spatial-Navigation ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë„ì…í•˜ê²Œ ë˜ì—ˆê³ , ì‚¬ìš©í•´ë³¸ ê²½í—˜ì„ í† ëŒ€ë¡œ ì‚¬ìš©ë²•ì„ ê³µìœ í•˜ë ¤ê³  í•œë‹¤.

ê°œë°œí™˜ê²½ì€ ë¦¬ì•¡íŠ¸ì™€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë‹¤. ë¦¬ì•¡íŠ¸ í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ [react-spatial-navigation](https://github.com/NoriginMedia/react-spatial-navigation)ì—ì„œëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì§€ì›ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§ˆì´ê·¸ë ˆì´ì…˜í•œ [Norigin-Spatial-Navigation](https://github.com/NoriginMedia/Norigin-Spatial-Navigation)ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

## ì‚¬ì „ ì¤€ë¹„

### 1. Typescript CRA ìƒì„±

```bash
npx create-react-app <project-name> --template typescript
```

### 2. Spatial-Navigation ì„¤ì¹˜

ìƒì„±í•œ í”„ë¡œì íŠ¸ ë””ë ‰í„°ë¦¬ë¡œ ì´ë™í•´ Spatial-Navigation ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜.

ë³¸ì¸ì€ styled-components ë„ ê°™ì´ ì„¤ì¹˜í•¨. `yarn add styled-components @types/styled-components`

```bash
cd <project-name>
yarn add @noriginmedia/norigin-spatial-navigation
```

### í”„ë¡œì íŠ¸ êµ¬ì¡°

```
â”œâ”€â”€ ğŸ“Â node_modules
â”œâ”€â”€ ğŸ“Â public
â”œâ”€â”€ ğŸ“Â src
â”‚   â”œâ”€â”€ ğŸ“Â components
â”‚   â”‚   â”œâ”€â”€ SideNav.tsx
â”‚   â”‚   â”œâ”€â”€ SideNavItem.tsx
â”‚   â”‚   â”œâ”€â”€ Gallery.tsx
â”‚   â”‚   â””â”€â”€ GalleryItem.tsx
â”‚   â”œâ”€â”€ App.tsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ README.md
â””â”€â”€ yarn.lock
```

### ì˜ˆì œ ë ˆì´ì•„ì›ƒ & ì†ŒìŠ¤ì½”ë“œ

ì˜ˆì œì˜ ì†ŒìŠ¤ì½”ë“œëŠ” [ì—¬ê¸°ì—ì„œ](https://github.com/thisyujeong/spatial-navigation-example) í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì»´í¬ë„ŒíŠ¸ëŠ” ì´ 4ê°œë¡œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

1. SideNav
2. SideNavItem
3. Gallery
4. GalleryItem

![ì˜ˆì œ ë ˆì´ì•„ì›ƒ ì‚¬ì§„](/posts/spatial-navigation-4.png)

## êµ¬í˜„ ìˆœì„œ

1. Spatial-Navigation ì´ˆê¸°í™”
2. focusê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì— focusable ë“±ë¡
3. ìˆ˜ë™ìœ¼ë¡œ focuse ì„¤ì •
4. ìì‹ ì»´í¬ë„ŒíŠ¸ focusable ë“±ë¡

### Spatial-Navigation ì´ˆê¸°í™”

roote ì»´í¬ë„ŒíŠ¸(`App.tsx`)ì—ì„œ spatial navigationì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

```tsx:App.tsx
...
import { init } from "@noriginmedia/norigin-spatial-navigation";
init();

function App(){ return ... }
export default App;
```

init ì˜µì…˜ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì£¼ ì“°ì˜€ë˜ ì˜µì…˜ì€ debug ì™€ visualDebug ê°€ ìˆìŠµë‹ˆë‹¤.

- `debug`: ì½˜ì†” ë¡œê·¸ë¥¼ í†µí•´ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `visualDebug`: focusable ë¡œ ë“±ë¡ëœ ìš”ì†Œë“¤ê³¼ í¬ì»¤ìŠ¤ ì´ë™í˜„í™©ì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
init({ debug: true, visualDebug: true });
```

### focusê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì— focusable ë“±ë¡

ì»´í¬ë„ŒíŠ¸ë¥¼ í¬ì»¤ìŠ¤í•  ìˆ˜ ìˆë„ë¡ ë“±ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” FocusContextì™€ useFocusable ì„ import í•´ì˜µë‹ˆë‹¤.

`FocusContext` ëŠ” í¬ì»¤ìŠ¤ í•  ìì‹ìš”ì†Œê°€ ìˆëŠ” ì»¨í…Œì´ë„ˆë¡œ `Provider` ë¥¼ í†µí•´ ë¶€ëª¨ í¬ì»¤ìŠ¤ í‚¤ ì—­í• ì„ í•©ë‹ˆë‹¤.

```tsx:src/components/SideNav.tsx
import { FocusContext, useFocusable } from '@noriginmedia/norigin-spatial-navigation';
import NavItem from './NavItem';

const SideNav = () => {
  const { ref, focusKey } = useFocusable();
  const items = new Array(5).fill(''); // ì˜ˆì‹œë¥¼ ìœ„í•œ ì•„ì´í…œ

  return (
    <FocusContext.Provider value={focusKey}>
      <SideNavContainer ref={ref}>
        {items.map((item, i) => (
          <NavItem key={i} />
        ))}
      </SideNavContainer>
    </FocusContext.Provider>
  );
};
```

1. `useFocusable` Hookë¥¼ ì„ ì–¸í•˜ê³  í¬ì»¤ìŠ¤ ëŒ€ìƒì´ ë  ìš”ì†Œì— `ref` ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.
   1. `SideNavContainer` ì— ref ë“±ë¡
2. `FocusContext.Provider` ë¡œ ì»´í¬ë„ŒíŠ¸ë“¤ì„ Wrapping í•©ë‹ˆë‹¤.

   1. FousContext ì—ëŠ” value ê°’ ì„ í•„ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼í•©ë‹ˆë‹¤.
   2. value ëŠ” focusKeyë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.

      1. focusKeyëŠ” ìë™ìœ¼ë¡œ ì§€ì •ë˜ì§€ë§Œ ì§ì ‘ ì„¤ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

      ```tsx
      const { ref, focusKey } = useFocusable({
      	focuseKey: 'item-focus"
      });
      ```

ìœ„ì˜ ì½”ë“œë¥¼ ê¸°ì¤€ìœ¼ë¡œ í˜ì´ì§€ì—ì„œ `SideNav` â†’ `SideNavContainer` â†’ `NavItem` ìœ¼ë¡œ í¬ì»¤ìŠ¤ë¥¼ ì „íŒŒí•©ë‹ˆë‹¤.

### ìˆ˜ë™ìœ¼ë¡œ focus ì„¤ì •í•˜ê¸°

useFousable Hookì„ ì‚¬ìš©í•´ ìˆ˜ë™ìœ¼ë¡œ í¬ì»¤ìŠ¤ ì„¤ì •ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. useEffect Hookì„ í™œìš©í•´ í˜ì´ì§€ ë Œë” ì‹œ defaultë¡œ í¬ì»¤ìŠ¤ ë  ìš”ì†Œë¥¼ ì„¤ì •í•´ì•¼ í•˜ëŠ” ìƒí™©ì— ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- setFocus ì˜ ì¸ìë¡œ focusKey ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ë²•

```jsx
const { ref, setFocus, focusKey } = useFocusable();
setFocus(focusKey);
```

- focusSelf ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ë²•

```jsx
const { ref, focusSelf, focusKey } = useFocusable();
useEffect(() => {
  focusSelf();
}, [focusSelf]);
```

ë³¸ ì˜ˆì œì—ì„œëŠ” í˜ì´ì§€ ë Œë” ì‹œ `SideNav` ì»´í¬ë„ŒíŠ¸ì˜ `NavItem` ì„ ë””í´íŠ¸ë¡œ í¬ì»¤ìŠ¤í•˜ë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.

```tsx:src/components/SideNav.tsx
import { FocusContext, useFocusable } from '@noriginmedia/norigin-spatial-navigation';
import { useEffect } from 'react';

const SideNav = () => {
  const { ref, focusSelf, focusKey } = useFocusable();

  useEffect(() => {
    focusSelf();
  }, []);

  return (
    <FocusContext.Provider value={focusKey}>
      <SideNavContainer ref={ref}>
        {items.map((item, i) => (
          <NavItem key={i} />
        ))}
      </SideNavContainer>
    </FocusContext.Provider>
  );
};
```

ìì‹ ì»´í¬ë„ŒíŠ¸ë„ ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‘ì„±í•˜ë©´ ì´ë ‡ê²Œ ë°©í–¥í‚¤ë¡œ í¬ì»¤ìŠ¤ê°€ ê°€ëŠ” ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![í¬ì»¤ìŠ¤ ì ìš©í•œ ì˜ˆì œ ì´ë¯¸ì§€](/posts/spatial-navigation-2.gif)

> visualDebug ëª¨ë“œì—ì„œ í™•ì¸í•œ ëª¨ìŠµ

ì˜†ì˜ ê·¸ë¦¬ë“œ ì˜ì—­ë„ ë™ì¼í•˜ê²Œ ì‘ì—…í•´ì¤ë‹ˆë‹¤.

## ê¸°íƒ€ API ì‚¬ìš©í•´ë³´ê¸°

### Focused ì—¬ë¶€ì— ë”°ë¼ ìŠ¤íƒ€ì¼ì„ ë³€ê²½í•´ë³´ì.

useFocusable hook ì˜ `focused` ëŠ” í•´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ í¬ì»¤ìŠ¤ë˜ì—ˆëŠ”ì§€ true / false ë°˜í™˜í•©ë‹ˆë‹¤.

ì´ë¥¼ ì´ìš©í•´ì„œ í¬ì»¤ìŠ¤ ëœ ì—˜ë¦¬ë¨¼íŠ¸ì— ìŠ¤íƒ€ì¼ì„ ë”í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![ìŠ¤íƒ€ì¼ ì ìš©í•œ ì˜ˆì œ ì´ë¯¸ì§€](/posts/spatial-navigation-3.gif)

ë³¸ ì˜ˆì œì—ì„œëŠ” styled-components ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. styled-components ë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì˜ ì½”ë“œì²˜ëŸ¼ `useFocusable` í›…ì˜ `focused` ë¡œ `props`ë¥¼ ì „ë‹¬í•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx:src/components/NavItem.tsx
import styled from 'styled-components';

const NavItemContainer = styled.div<{ focused: boolean }>`
	...
  background: ${({ focused }) => (focused ? '#ff9c45' : '#ffffff')};
`;

const NavItem = () => {
  const { ref, focusKey, focusSelf, focused } = useFocusable();

  useEffect(() => {
    focusSelf();
  }, []);

  return (
    <FocusContext.Provider value={focusKey}>
      <NavItemContainer ref={ref} focused={focused}>
        <div>Nav Item</div>
      </NavItemContainer>
    </FocusContext.Provider>
  );
};
```

styled-componentsë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ focused ë¥¼ í† ê¸€í˜•íƒœë¡œ í´ë˜ìŠ¤ë¥¼ ì§€ì •í•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx:src/components/NavItem.tsx
const NavItem = () => {
  const { ref, focusKey, focusSelf, focused } = useFocusable();

  useEffect(() => {
    focusSelf();
  }, []);

  return (
    <FocusContext.Provider value={focusKey}>
      <NavItemContainer ref={ref} className={focused ? 'item-focused' : 'item'}>
        <div>Nav Item</div>
      </NavItemContainer>
    </FocusContext.Provider>
  );
};
```

```css
.item-focused {
  background: #ff9c45;
}
```

### ìì‹ìš”ì†Œê°€ focused ìƒíƒœì¸ì§€ ì•Œì•„ë³´ì.

ë¶€ëª¨ ì»´í¼ë„ŒíŠ¸ì—ì„œ ìì‹ìš”ì†Œê°€ focused ìƒíƒœì¸ì§€ ì•Œì•„ì•¼ í•  ìƒí™©ì´ ìˆì„ ìˆ˜ ìˆê² ì£ ?

ê·¸ëŸ´ ë•Œ useFocusable Hook ì˜ `hasFocusedChild` ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨, `trackChildren` ì˜µì…˜ì´ true ì¼ ê²½ìš°ì—ë§Œ ë™ì‘í•˜ë¯€ë¡œ ìŠì§€ë§ê³  ì‘ì„±í•´ì£¼ë„ë¡ í•©ë‹ˆë‹¤.

```tsx
const { ref, focusSelf, focusKey, hasFocusedChild } = useFocusable({
  trackChildren: true,
});
```

`SideNav`ì— `hasFocusedChild` ë¥¼ í™œìš©í•´ ìŠ¤íƒ€ì¼ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ğŸ™‚Â  ë°©ë²•ì€ NavItem ê³¼ ë™ì¼í•©ë‹ˆë‹¤.

```tsx:src/components/SideNav.tsx
const SideNavInner = styled.div`
	...
  background: #121212;
  &.has-focused-child {
    background: #59b94a;
  }
`;

const SideNav = () => {
  const { ref, focusSelf, focusKey, hasFocusedChild } = useFocusable({
    trackChildren: true,
  });

  ...
  return (
    <FocusContext.Provider value={focusKey}>
      <SideNavContainer ref={ref}>
        <SideNavInner className={hasFocusedChild ? 'has-focused-child' : ''}>
          {items.map((item, i) => (
            <NavItem key={i} />
          ))}
        </SideNavInner>
      </SideNavContainer>
    </FocusContext.Provider>
  );
};
```

Spatial-Navigationì— ëŒ€í•œ ë‚´ìš©ì€ ì—¬ê¸°ê¹Œì§€ì…ë‹ˆë‹¤.

## ì°¸ê³ í•œ ê¸€, ë¬¸ì„œ

---

ì´ ì™¸ì—ë„ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì´ ìˆìœ¼ë‹ˆ ì•„ë˜ ë§í¬ì—ì„œ ìì„¸í•˜ê²Œ ì‚´í´ë³´ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.

[Norigin-Spatial-Navigation](https://github.com/NoriginMedia/Norigin-Spatial-Navigation)  
[react-spatial-navigation](https://github.com/NoriginMedia/react-spatial-navigation)  
[React.js Example - react-hooks-based-spatial-navigation](https://reactjsexample.com/react-hooks-based-spatial-navigation-key-remote-control-navigation-web-browsers-smart-tvs-and-connected-tvs/)
